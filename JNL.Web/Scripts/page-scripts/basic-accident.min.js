(function(n,t){t(function(){page.init();page.bindEvents()});n.page={commonTable:null,columns:["OccurrenceTime","Place","ResponseBureau","ResponseDepot","AccidentType","Summary","Id"],builds:[{targets:[5],onCreateCell:function(n){return n=n+"",'<td style="justify-content:space-between">{0}<\/td>'.format(n)}},{targets:[6],onCreateCell:function(n){return'<td><a href="/Basic/AccidentDetail/{0}" title="点击查看详情"><i class="small mdi-content-link"><\/i><\/a><\/td>'.format(n)}}],ajaxParams:{OrderField:"AddTime",Desending:!0},getConditions:function(){var n=[],s=+t("#searchMonth").val(),r,h,u,i,f,e,o;return s>0&&n.push("DATEPART(MONTH, OccurrenceTime)="+s),r=t("#searchStar").val(),r&&(h=new Date(r).format("yyyy-MM-dd"),n.push("AddTime > '{0}'".format(h))),u=t("#searchEnd").val(),u&&(i=new Date(u),i.setHours(23),i.setMinutes(59),i.setSeconds(59),n.push("AddTime < '{0}'".format(i.format("yyyy-MM-dd HH:mm:ss")))),f=t("#searchPlace").val(),f&&n.push("Place LIKE '%{0}%'".format(f)),e=t("#searchReason").val(),e&&n.push("Reason LIKE '%{0}%'".format(e)),o=t("#searchType").val(),o&&n.push("AccidentType='{0}'".format(o)),t(".same-condition").each(function(){var i=t(this).val(),r=t(this).data("field");i&&n.push("{0} LIKE '%{1}%'".format(r,i))}),n},selectConfigs:[{type:7,selector:"#searchType",value:"Name"},{type:8,selector:"#searchLocoType",value:"Name"},{type:9,selector:"#searchWeather",value:"Name"},{type:15,selector:"#searchDepot",value:"Name"},{type:16,selector:"#searchBereau",value:"Name"},{type:17,selector:"#searchPlace",value:"Name"}],init:function(){this.ajaxParams.TableName="Accident";this.ajaxParams.PageIndex=1;this.ajaxParams.PageSize=20;var n=this;n.commonTable=t.commonTable(".accident-table",{columns:n.columns,builds:n.builds,ajaxParams:n.ajaxParams,getConditions:n.getConditions});common.pickdate();common.loadDictionaries(n.selectConfigs)},bindEvents:function(){var n=this;t("#btnSearch").on("click",function(){n.commonTable.setPageIndex(1);n.commonTable.loadData()})}}})(window,jQuery);